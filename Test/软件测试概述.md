软件测试概述
======================

# 引论
软件测试的原因：发现缺陷，保证软件质量，节约成本。

学科发展：依次经历以功能验证、破坏性检测、质量评估、缺陷预防为导向。正向思维和逆向思维：验证功能是否都通过，假设软件错误找错。

软件测试是由“验证（Verification）”和“有效性确认（Validation）”活动构成的整体。“验证”是检验软件是否已正确地实现了产品规格书所定义的系统功能和特性，“有效性确认”是确认所开发的软件是否满足用户真正需求的活动。(产品规格书是自己根据用户描述书写的，不能完全代表用户)

软件开发和测试各阶段一一对应：需求分析-用户验收测试，系统设计-系统非功能测试，详细功能设计-功能测试，编码-单元测试。



# 软件测试基本概念
软件质量：软件产品具有满足规定的或隐含要求能力要求有关的特征与特征总和。特征：功能，可靠，易用，效率，可维护，可移植。

软件缺陷：开发过程中导致的错误（内部）；不满足系统需求（外部）。

缺陷产生：技术问题编码；团队沟通工作；软件本身。大多来自规格说明书。大量缺陷在早期发现，越晚发现缺陷成本越高。

分类
- 按测试范围或层次，如单元测试、文档测试、系统测试等
- 按测试目的，如功能测试、回归测试、性能测试、可靠性测试、安全性测试和兼容性测试等
- 根据测试过程中被测软件是否被执行，分为静态测试和动态测试
- 根据是否针对系统的内部结构和具体实现算法来完成测试，可分为白盒测试和黑盒测试

静态测试与动态测试
- 静态测试：对软件产品的需求和设计规格说明书的评审、对程序代码的复审等
- 动态测试：通过真正运行程序发现错误，通过观察代码运行过程，来获取系统信息，对系统行为进行验证。

主动测试与被动测试
- 主动测试：主动给输入，直接观察输出。
- 被动测试：只是监听系统运行，获取运行状况。

黑盒白盒测试
- 黑盒：功能测试，数据驱动测试。从外部给输入，验证输出。不关系内部细节。
- 白盒：从逻辑结构分析。 

单元测试：用白盒测试对系统最小单元。开发人员做。

集成测试：验证各模块接口。

系统功能测试：从用户角度验证各功能。

验收测试和安装测试：相当于开发完成后的，测试环境和生产环境的测试。

Alpha与Beta
- 软件产品用户众多不能每个用户进行验收
- Alpha测试：内部人员在实际运行环境发现测试阶段未发现的问题。
- Beta测试：Alpha修正的版本即Beta版本，该版本交给典型用户使用进行测试，修正后发布正式版本。



# 软件测试方法

基于输入域、组合（黑盒）
- 等价类划分法
- 边界值分析法
- 判定表方法

基于逻辑覆盖（白盒）
- 语句覆盖
- 判定覆盖
- 条件覆盖
- 判定-条件覆盖
- 条件组合覆盖
- 路径覆盖



# 软件测试流程和规范
W模型：开发和测试各阶段同步进行
- 需求分析定义    测试目标
- 系统结构设计    测试计划，系统测试用例设计
- 详细程序设计    功能测试用例设计
- 编码及单元测试  代码审查单元测试
- 缺陷修正        功能测试
- 缺陷修正        系统测试
- 缺陷修正        验收测试

TMap (Test Management Approach，测试管理方法)
- 是一种结构化的、基于风险策略的测试方法体系, 目的能更早地发现缺陷，以最小的成本、有效地、彻底地完成测试任务，以减少软件发布后的支持成本。
- Preparation，可测试性评审，确定技术方法
- Specification，详细设计测试用例，建立测试基础设施
- Execution，测试，检查评估
- Completed，维护测试件，评估测试过程
- 三大基石：与开发同步的过程，人员组织，优秀的技术



# 单元测试
单元测试是对软件基本的组成单元进行独立的测试。

进行单元测试的原因：
- 错误发现越早,成本越低.
- 发现问题比较容易
- 修正问题更容易

目标：单元模块被正确编码。

单元测试可能依赖驱动程序和桩程序
- 驱动(drive)：用来调用该单元模块的程序
- 桩(stub)：该单元模块依赖的基础程序



# 集成测试
- 非渐增式测试模式：先分别测试每个模块，再把所有模块按设计要求放在一起结合成所要的程序，如大棒模式。
- 渐增式测试模式：把下一个要测试的模块同已经测试好的模块结合起来进行测试，测试完以后再把下一个应该测试的模块结合进来测试。

优缺点
- 非渐增：因为所有的模块一次集成的，所以很难确定出错的真正位置、所在的模块、错误的原因。仅适合在规模较小的应用系统中使用。  
- 渐增(持续集成)：软件开发中各个模块不是同时完成，根据进度将完成的模块尽可能早的进行集成，有助于尽早发现Bug。更容易定位错误。

自顶向下和自底向上持续集成优缺点相反，前者为：
- 优点：不需要驱动测试程序，早期验证系统主要功能，发现模块接口错误
- 缺点：需要桩程序，底层模块错误发现晚，早期不能充分利用人力

混合自顶向下和自底向上：早期使用自底向上，架构中上层采用自顶向下。

三明治集成测试：采用三明治方法的优点是：它将自顶向下和自底向上的集成方法有机地结合起来，不需要写桩程序因为在测试初自底向上集成已经验证了底层模块的正确性。采用这种方法的主要缺点是：在真正集成之前每一个独立的模块没有完全测试过。

改进的三明治集成方法，不仅自两头向中间集成，而且保证每个模块得到单独的测试，使测试进行得比较彻底 。





# 系统测试
## 功能测试
用户需求为导向。

## 回归测试
检验程序修改的部分，是否影响之前已测试的模块，能够适应新的运行环境等；不影响软件原有功能的正确性。

回归测试策略
- 再测试全部用例	
- 基于风险选择测试
- 基于操作剖面选择测试	
- 再测试修改的部分
- 更智能的选择方法

## 性能测试
性能测试：为了(1)发现系统性能问题或(2)获取系统性能相关指标而进行的测试。一般在真实环境、特定负载条件下，通过工具模拟实际软件系统的运行及其操作，同时监控性能各项指标，最后对测试结果进行分析来确定系统的性能状况。(3)验证系统是否达到用户提出的性能指标。

需要全周期不断的进行性能测试，不断迭代改性。

性能问题：资源耗尽，资源泄漏，资源瓶颈。

指标
- 服务器的各项指标（CPU、内存占用率等）
- 数据传输的吞吐量（Transactions）
- 数据处理效率（Transactions per second）
- 数据请求的响应时间（Response time）
- 内存和CPU使用率
- 等等

测试类型
- 性能验证测试，验证系统是否达到事先已定义的系统性能指标、能否满足系统的性能需求
- 性能基准测试，在系统标准配置下获得有关的性能指标数据，作为将来性能改进的基准线
- 性能规划测试，在多种特定的环境下，获得不同配置的系统的性能指标，从而决定在系统部署时采用什么样的软、硬件配置
- 容量测试可以看作性能的测试一种，因为系统的容量可以看作是系统性能指标之一

压力测试(Stress test)，也称为强度测试、负载测试。压力测试是模拟实际应用的软硬件环境及用户使用过程的系统负荷，长时间或超大负荷地运行测试软件，来测试被测系统的性能、可靠性、稳定性等。**找出性能瓶颈或其它不稳定性问题。并发性能测试（重点），疲劳强度测试，大数据量测试**

**压力测试之并发性能测试**破坏性压力测试，逐渐增加并发虚拟用户数负载，直到系统出现性能瓶颈或者崩溃，让问题尽快地暴露出来。

**压力测试之疲劳强度测试**采用系统稳定运行情况下能够支持的最大负载，持续长时间运行，以发现性能问题。（渗入测试，峰谷测试。）

## 安全性测试
软件安全性测试就是检验系统权限设置有效性、防范非法入侵的能力、数据备份和恢复能力等，设法找出上述各种安全性漏洞 

安全测试范围
- 系统级别的安全
- 应用程序级别的安全
    - 用户权限
    - 数据输入验证
    - 敏感数据加密
    - 数据存储安全性
    - 用户口令
    - 验证系统的日志文件是否得到保护 
    - ...
- 安全功能测试：开发者保证数据完整、可用、身份验证等功能。
- 安全漏洞测试：从攻击者角度发现缺陷。

安全测试方法
- 基于漏洞，从软件内部考虑
- 基于威胁，从软件外部考虑
- 黑盒白盒灰盒
- 基于模型的安全功能测试
- 基于故障注入的安全性测试
- 模糊测试（Fuzz Testing）
- 基于白盒的安全测试
- 威胁模型与攻击树理论






# 验收测试
验收测试 (Acceptance Test): 在软件产品完成了系统功能和非功能测试之后、产品发布之前所进行的软件测试活动它是技术测试的最后一个阶段，也称为交付测试。 





# 国际化和本地化测试
软件国际化（SW Internationalization，I18N）
I18N是借助功能设计和代码实现中软件系统有能力处理多种语言和不同文化，使创建不同语言版本时，不需要重新编写代码的软件工程方法。

软件本地化（SW Localization，L10N）
L10N是将一个软件产品按特定国家/地区或语言市场的需要进行加工，使之满足特定市场上的用户对语言和文化的特殊要求的软件生产活动。

解决问题
- 字符编码，Unicode
- 文字排版和大小写转换，文本显示尺寸
- 键盘设置
- 度量衡，时间，货币，度量衡等
- 用户界面设计





# 软件测试自动化
手工测试的问题
-测试所有可能情况将遭遇“组合爆炸”问题
-代码全部Code Path测试覆盖也几乎不可能
-可重复使用的自动测试对产品未来版本与Service Pack的测试将有事半功倍的效果
-许多与时序、死锁、资源冲突、多线程等有关的错误通过手工测试很难捕捉到
-在进行系统可靠性时，需要模拟系统运行十年、几十年，以验证系统能否稳定运行，也是手工测试无法模拟的。
-测试可以发现错误，并不能表明程序的正确性。 

自动化测试：由手工逐个地运行测试用例的操作过程被测试工具自动执行的过程所代替，测试工具的使用是自动化测试的主要特征。

手工测试 
- 发现缺陷率高
- 容易实施 
- 创造性、灵活性
- 覆盖率量化困难
- 重复测试效率低
- 不一致性、可靠性低
- 依赖人力资源

自动测试
- 高效率（速度）
- 高复用性
- 覆盖率容易度量
- 准确、可靠
- 不知疲劳
- 激励团队士气
- 机械、难以发现缺陷
- 一次性投入大

测试自动化原理
- 代码分析：用工具检测语法正确性。
- 捕获和回收
- 直接编写脚本控制操作验证对象：线性脚本(录制手工执行测试用例过程的脚本)，结构化脚本(具有逻辑，函数调用功能的结构化程序设计)，数据驱动脚本(将数据独立存储其他文件中，该脚本调用数据)

测试自动化项目本质上是软件开发项目。

一个测试自动化项目必须具有：清晰定义并严格实施的过程；来自组织各级的支持；周密的计划；具体的设计和架构。

正确的认识：找准测试自动化的切入点；把测试脚本开发纳入整个软件开发体系；软件程序开发和测试自动化不可分离 ；资源的合理调度；测试自动化依赖测试流程和测试用例；降低测试自动化的投入、提高其产出 ；找准测试自动化的切入点；把测试开发纳入整个软件开发体系；测试自动化依赖测试流程和测试用例；软件测试自动化的投入较大；进行资源的合理调度。
