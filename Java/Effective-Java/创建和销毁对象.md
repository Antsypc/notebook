创建和销毁对象
========

## 考虑使用静态工厂方法代替构造器Constructor
注意:这里的静态工厂并不完全对应设计模式中的静态工厂方法.

**优点**
- `顾名思义` : 静态工厂方法可以提供一个名字,用来描述返回对象的特征.调用者可以更加清晰的了解功能.
- `避免创建重复对象` : 类经常需要返回相同性质的对象,尤其是 `final`,那么使用静态工厂方法提前创建,每次返回相同会更好.如 `Enum`.
- `返回类型不受限` : 有时在设计时,可能需要直接返回该类的子类对象,如 `Collections` 对象等.
- `简化参数` : 避免冗长的参数,可以预设参数,指定对应的静态工厂方法.

**缺点**
- `不能有子类` : 如果没有 public 或 protected 构造方法就不能被子类实例化,所以不方便.不过可以通过组合而不是继承实现这种关系.

**总结**  
静态工厂方法应该是对于避免创建重复对象更加有实际意义,其他嘛...待研究.

## 构造方法参数过多考虑使用构建器Builder
当有多个参数需要传递给构造方法,而且很多是可选参数,这时写多个构造方法来适配多种情况,会显得很麻烦.

以前,可以考虑使用 JavaBean 的思想,把这些参数都放在一个类,调用`setter`方法,这样可以对某些参数设置默认值,
还可以直接把 Javabean 对象传给构造方法,显得简单.但是,很显然,Javabean 自身有相当多的问题.

使用构建器,加入现在有一个食品的类,需要食品的各种参数,有的需要默认,有的需要特别设置.那么这个类可以像如下方式进行书写:

```
// Builder Pattern
public class NutritionFacts {
    private final int servingSize;
    private final int servings;
    private final int calories;
    private final int fat;
    private final int sodium;
    private final int carbohydrate;
    
    public static class Builder {
        // Required parameters
        private final int servingSize;
        private final int servings;
        // Optional parameters - initialized to default values
        private int calories = 0;
        private int fat = 0;
        private int carbohydrate = 0;
        private int sodium = 0;
    
        public Builder(int servingSize, int servings) {
            this.servingSize = servingSize;
            this.servings = servings;
        }
        public Builder calories(int val)
        { calories = val; return this; }
        
        public Builder fat(int val)
        { fat = val; return this; }
        
        public Builder carbohydrate(int val)
        { carbohydrate = val; return this; }
        
        public Builder sodium(int val)
        { sodium = val; return this; }
        
        public NutritionFacts build()
        { return new NutritionFacts(this); }
    }
    
    private NutritionFacts(Builder builder) {
        servingSize = builder.servingSize;
        servings = builder.servings;
        calories = builder.calories;
        fat = builder.fat;
        sodium = builder.sodium;
        carbohydrate = builder.carbohydrate;
    }
}
```

现在就可以根据自己需求,需要初始化那些参数就可以进行选择性的设置:

    NutritionFacts cocaCola = new NutritionFacts.Builder(240, 8)
        .calories(100).sodium(35).carbohydrate(27).build();
        
**总结**  
显然,构建器方法虽然不能简化实现代码,但是确实提供了使用上的方便,也方便了需求变更时灵活的添加参数等需求.